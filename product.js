const floatingMenu=$(".main-menu"),main=$(".main"),floatingMenuTop=floatingMenu.offset().top-main.offset().top-8;floatingMenu.hide(),main.on("scroll",(()=>{main.scrollTop()>=floatingMenuTop?floatingMenu.fadeIn(200):floatingMenu.fadeOut(200)})),$(window).on("scroll",(()=>{const e=$(".section").offset().top-2*parseFloat(getComputedStyle(document.documentElement).fontSize)-24;window.innerWidth<480&&(window.scrollY>=e?floatingMenu.fadeIn(200):floatingMenu.fadeOut(200))}));const productGallery=new Flickity(".product-image-gallery",{imagesLoaded:!0,contain:!0,wrapAround:!0,freeScroll:!0,pageDots:!1,percentPosition:!1,prevNextButtons:!1,cellAlign:"left"});let dragStartX=0;const dragThreshold=10;productGallery.on("dragStart",(function(e,t){dragStartX=t.clientX})),productGallery.on("dragMove",(function(e,t){Math.abs(t.clientX-dragStartX)>10&&(productGallery.slider.style.pointerEvents="none")})),productGallery.on("dragEnd",(function(){productGallery.slider.style.pointerEvents="auto"}));const flickitySlider=document.querySelector(".flickity-slider");if(flickitySlider){const e=window.innerWidth;flickitySlider.style.left=e>=991?"1.5rem":".875rem"}const hamburgerMenuIcon=document.querySelector(".hamburger-menu-icon"),productImageGallery=document.querySelector(".product-image-gallery"),overlay=document.querySelector(".overlay");hamburgerMenuIcon.addEventListener("click",(function(){hamburgerMenuIcon.classList.contains("is-open")&&(productImageGallery.style.zIndex=2)})),overlay.addEventListener("click",(function(){productImageGallery.style.zIndex=9999})),hamburgerMenuIcon.addEventListener("click",(function(){hamburgerMenuIcon.classList.contains("is-close")&&(productImageGallery.style.zIndex=9999)}));const productRatingWrapper=document.querySelector(".product-rating-wrapper"),productRatingContainer=document.querySelectorAll(".product-rating-container.is-header"),containerHeight=productRatingContainer[0].clientHeight;if(productRatingWrapper.clientHeight>=2*containerHeight){productRatingContainer[productRatingContainer.length-1].style.paddingLeft=0;productRatingContainer[productRatingContainer.length-2].style.borderRight="none"}const debounce=(e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...r)}),t)}},getLineHeight=e=>{e.tagName,e.className;const t=e.dataset.lineHeight;if(t)return parseFloat(t);const n=parseFloat(getComputedStyle(e).lineHeight);return e.dataset.lineHeight=n,n},binarySearch=(e,t,n)=>{let r=0,o=e.length-1;for(;r<=o;){const a=Math.floor((r+o)/2),i=n(t,e[a]);if(0===i)return a;i<0?o=a-1:r=a+1}return o},truncateText=e=>{const t=e.querySelector("p, h2, h3, h4, h5, h6, div, span");if(!t)return;const n=t.innerHTML,r=parseInt(e.dataset.maxHeight);if(!r)return;const o=getLineHeight(t);if(Math.floor(r/o)>=t.offsetHeight/o)return;let a,i,l=0,c=n.length-1;for(;l<=c;)i=a,a=Math.floor((l+c)/2),t.innerHTML=n.slice(0,a)+"...",t.offsetHeight<=r?l=a+1:c=a-1;t.innerHTML=n.slice(0,i)+"..."},observer=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){if(e.target.dataset.truncated)return;truncateText(e.target),e.target.dataset.truncated=!0,observer.unobserve(e.target)}}))}),{root:null,threshold:0}),observeElements=()=>{document.querySelectorAll("[data-max-height]").forEach((e=>{observer.observe(e)}))},debouncedObserveElements=debounce(observeElements,50);window.addEventListener("load",debouncedObserveElements);